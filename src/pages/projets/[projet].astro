---
import getProjets from "../../api/getDatas";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const projets = await getProjets()
  
  return (
    projets.map(game=>({
      params:{projet:game.title}
    }))
  )
}

const {projet}=Astro.params
const projetsDatas =await getProjets()
const datas = projetsDatas.find(el=>el.title===projet)!
---

<Layout title={'Achtaitaipai | '+projet} pageCategory="projets">
    <div class="projectResume">
      <h2 class="projectResume_title">{datas.title}</h2>
      <img src={datas.cover_url} width="315" height="250" class="projectResume_img"/>
      <a href={datas.url} target="_blank" class="projectResume_link">{datas.classification === 'game' ? 'Jouer' : 'Visiter'}</a>
      <p class="projectResume_description">{datas.short_text}</p>
    </div>
</Layout>

<style>
  .projectResume{
    width:var(--medium-width);
    margin: auto;
    background-color: var(--surface-2);
    padding: 1rem 2rem;
    box-shadow:var(--shadow-1);
    display: flex;
    flex-direction: column;
    gap:1rem;
    justify-content: center;
    align-items: center;
  }

  .projectResume_title{
    color:var(--neutral-color);
    font-size: 1.5rem;
  }

  .projectResume_img{
    width: 315px;
    height: 250px;
  }
  .projectResume_description{
    color:var(--neutral-color);
  }

  .projectResume_link{
    color:var(--accent-color);
  }
</style>