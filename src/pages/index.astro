---
import Layout from "../layouts/Layout.astro";
import getGames from "../api/ItchioApi";
import Filter from "../components/Filter.astro";
import Card from "../components/Card";
import TagsList from '../components/TagsList'
import Nav from "../components/Nav"
import type { Game } from "../api/gamesType";


const projetsMd = (await Astro.glob('../pages/projets/*.md')).map(el=>({...el.frontmatter})) as Game[];

const projetsItch = await getGames()
const projets = 
	[...projetsItch,...projetsMd]
		.sort((a,b)=>{
			const date1 = new Date(a.created_at??0)
			const date2 = new Date(b.created_at??0)
			return date2.getTime() - date1.getTime()
		});
---

<Layout title="Achtaitaipai | Accueil">
	<header>
		<a href="./">
			<h1>Achtaitaipai</h1>
		</a>
		<Nav currentPage="projets"/>
		<TagsList client:load/>
	</header>
	<main>
			{projets.map((el) => <Card project={el} client:load/>)}
	</main>
	<Filter/>
</Layout>

<style lang="scss">
	header{
		padding: 1rem;
		display: flex;
		flex-direction: column;
		gap: 1rem;
		a h1{
			text-decoration:none;
				font-size:2rem;
				color:var(--accent-color);
				font-weight:500;
		}
	}
	main{
		display: grid;
		// grid-template-columns: repeat(4,1fr);
		width:min(90em,100%);
		margin: auto;
		justify-items: center;
		padding-block: 2rem ;
		gap: 2rem 0;
	}
	@media (min-width: 40em) { 
		main{
			grid-template-columns: repeat(2,1fr);
		}
	 }
	 @media (min-width: 60em) { 
		main{
			grid-template-columns: repeat(3,1fr);
		}
	 }
	 @media (min-width: 80em) { 
		main{
			grid-template-columns: repeat(4,1fr);
		}
	 }

</style>